/* 博客详情页用字体：之前用的霞鹜文楷（已注释）
@import url('https://fonts.googleapis.com/css2?family=LXGW+WenKai:wght@300;400;700&display=swap');
*/
/* 博客详情页用字体：站酷快乐体（ZCOOL KuaiLe）可爱圆润 */
@import url('https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap');

@import 'tailwindcss';
@import './view-transitions.css';
@import './themes.css';

@theme {
  /* Fonts */
  --font-sans: var(--font-sans), ui-sans-serif, system-ui, sans-serif;
  --font-display: var(--font-display), ui-sans-serif, system-ui, sans-serif;
  --font-motto: var(--font-motto), 'Nunito', ui-rounded, system-ui, sans-serif;
  /* --font-wenkai: 'LXGW WenKai', serif; */
  --font-blog: 'ZCOOL KuaiLe', cursive;
  /* Background */
  --color-bg-base: var(--theme-bg-base);

  /* Accent colors */
  --color-accent-primary: var(--theme-accent-primary);
  --color-accent-secondary: var(--theme-accent-secondary);
  --color-accent-tertiary: var(--theme-accent-tertiary);
  --color-accent-primary-light: var(--theme-accent-primary-light);
  --color-accent-secondary-light: var(--theme-accent-secondary-light);
  --color-accent-tertiary-light: var(--theme-accent-tertiary-light);
  --color-accent-primary-dark: var(--theme-accent-primary-dark);
  --color-accent-primary-muted: var(--theme-accent-primary-muted);
  --color-accent-primary-subtle: var(--theme-accent-primary-subtle);

  /* Surface colors */
  --color-surface-primary: var(--theme-surface-primary);
  --color-surface-secondary: var(--theme-surface-secondary);
  --color-surface-tertiary: var(--theme-surface-tertiary);
  --color-surface-hover: var(--theme-surface-hover);
  --color-surface-glass: var(--theme-surface-glass);
  --color-surface-selected: var(--theme-surface-selected);

  /* Content (text) colors */
  --color-content-primary: var(--theme-text-primary);
  --color-content-secondary: var(--theme-text-secondary);
  --color-content-tertiary: var(--theme-text-tertiary);
  --color-content-muted: var(--theme-text-muted);
  --color-content-dim: var(--theme-text-dim);
  --color-content-disabled: var(--theme-text-disabled);
  --color-content-inverse: var(--theme-text-inverse);

  /* Border (line) colors */
  --color-line-primary: var(--theme-border-primary);
  --color-line-secondary: var(--theme-border-secondary);
  --color-line-hover: var(--theme-border-hover);
  --color-line-focus: var(--theme-border-focus);
  --color-line-glass: var(--theme-border-glass);

  /* UI component colors */
  --color-ui-primary: var(--theme-ui-primary);
  --color-ui-primary-hover: var(--theme-ui-primary-hover);
  --color-ui-primary-ring: var(--theme-ui-primary-ring);
  --color-ui-destructive: var(--theme-ui-destructive);
  --color-ui-destructive-hover: var(--theme-ui-destructive-hover);
  --color-ui-destructive-light: var(--theme-ui-destructive-light);
  --color-ui-success: var(--theme-ui-success);
  --color-ui-success-text: var(--theme-ui-success-text);
  --color-ui-switch-off: var(--theme-ui-switch-off);

  /* Legacy alias for alignment guides */
  --color-primary: var(--theme-accent-primary);
  --color-primary-light: var(--theme-accent-primary-light);
  --color-primary-dark: var(--theme-accent-primary-dark);
}

@layer base {
  body {
    background-color: var(--theme-bg-base);
    @apply min-h-screen;
    transition: background-color 0.3s ease, color 0.3s ease;
    position: relative;
  }

  .frosted-overlay {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    backdrop-filter: blur(var(--frosted-blur, 60px)) saturate(var(--frosted-saturate, 1.8));
    -webkit-backdrop-filter: blur(var(--frosted-blur, 60px)) saturate(var(--frosted-saturate, 1.8));
    background: var(--frosted-tint, rgba(255, 255, 255, 0.05));
    transition: backdrop-filter 0.3s ease, background 0.3s ease;
  }

  body > * {
    position: relative;
    z-index: 1;
  }
}

@layer components {
  /* 编辑器/文章页共用：Markdown 内容区域外层，统一内边距与滚动 */
  .md-content-wrapper {
    padding: 0.25rem 0;
  }

  /* 专用于 Markdown 预览的排版样式，结合主题色，不受全局 reset 影响 */
  .md-content {
    color: var(--theme-text-primary);
    font-size: 0.9375rem;
    line-height: 1.75;
    letter-spacing: 0.01em;
  }

  .md-content > *:first-child {
    margin-top: 0;
  }

  .md-content > *:last-child {
    margin-bottom: 0;
  }

  .md-content h1,
  .md-content h2,
  .md-content h3,
  .md-content h4,
  .md-content h5,
  .md-content h6 {
    color: var(--theme-text-primary);
    font-weight: 650;
    line-height: 1.35;
    margin-top: 1.75rem;
    margin-bottom: 0.625rem;
    scroll-margin-top: 1rem;
  }

  .md-content h1 {
    font-size: 1.65rem;
    letter-spacing: -0.03em;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--theme-accent-primary);
    color: var(--theme-text-primary);
  }

  .md-content h2 {
    font-size: 1.35rem;
    letter-spacing: -0.02em;
    padding-bottom: 0.375rem;
    border-bottom: 1px solid var(--theme-border-primary);
    color: var(--theme-text-primary);
  }

  .md-content h3 {
    font-size: 1.15rem;
    color: var(--theme-accent-primary);
  }

  .md-content h4 {
    font-size: 1.05rem;
    color: var(--theme-text-primary);
  }

  .md-content h5 {
    font-size: 0.9375rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--theme-text-muted);
  }

  .md-content h6 {
    font-size: 0.875rem;
    color: var(--theme-text-muted);
  }

  .md-content p {
    margin-top: 0.625rem;
    margin-bottom: 0.625rem;
    color: var(--theme-text-secondary);
  }

  .md-content a {
    color: var(--theme-accent-primary);
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 3px;
    transition: color 0.15s ease;
  }

  .md-content a:hover {
    color: var(--theme-accent-secondary);
  }

  .md-content ul,
  .md-content ol,
  .md-content menu {
    padding-left: 1.625rem;
    margin-top: 0.625rem;
    margin-bottom: 0.625rem;
  }

  .md-content ul {
    list-style: none;
  }

  .md-content ul li {
    position: relative;
    padding-left: 0.5rem;
  }

  .md-content ul li::before {
    content: '';
    position: absolute;
    left: -1rem;
    top: 0.65em;
    width: 0.35rem;
    height: 0.35rem;
    border-radius: 50%;
    background: var(--theme-accent-primary);
    opacity: 0.9;
  }

  .md-content ol {
    list-style: decimal;
    list-style-position: outside;
  }

  .md-content ol li {
    padding-left: 0.25rem;
  }

  .md-content ol li::marker {
    color: var(--theme-accent-primary);
    font-weight: 600;
  }

  .md-content li {
    margin-top: 0.35rem;
    margin-bottom: 0.35rem;
  }

  .md-content li > ul,
  .md-content li > ol {
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
  }

  .md-content blockquote {
    margin: 1rem 0;
    padding: 0.875rem 1rem 0.875rem 1.25rem;
    border-left: 4px solid var(--theme-accent-primary);
    background-color: color-mix(in srgb, var(--theme-accent-primary-subtle) 50%, transparent);
    border-radius: 0 0.5rem 0.5rem 0;
    color: var(--theme-text-secondary);
    font-style: italic;
  }

  .md-content code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
      'Liberation Mono', 'Courier New', monospace;
    font-size: 0.875em;
    padding: 0.2em 0.4em;
    border-radius: 0.375rem;
    background-color: color-mix(in srgb, var(--theme-accent-primary-subtle) 70%, var(--theme-surface-tertiary));
    color: var(--theme-accent-primary-dark);
    border: 1px solid color-mix(in srgb, var(--theme-accent-primary) 15%, transparent);
  }

  .md-content pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
      'Liberation Mono', 'Courier New', monospace;
    font-size: 0.8125rem;
    line-height: 1.65;
    margin: 1rem 0;
    padding: 1rem 1.25rem;
    border-radius: 0.75rem;
    background: color-mix(in srgb, var(--theme-text-primary) 92%, var(--theme-surface-tertiary));
    color: var(--theme-surface-primary);
    border: 1px solid color-mix(in srgb, var(--theme-accent-primary) 20%, transparent);
    overflow-x: auto;
    box-shadow: 0 2px 8px var(--theme-shadow-color);
  }

  .md-content pre code {
    background: transparent;
    padding: 0;
    color: inherit;
    border: none;
  }

  .md-content hr {
    border: none;
    border-top: 1px dashed var(--theme-border-secondary);
    margin: 1.5rem 0;
  }

  .md-content img {
    max-width: 100%;
    height: auto;
    border-radius: 0.75rem;
    margin: 0.875rem 0;
    box-shadow: 0 4px 12px var(--theme-shadow-color);
    border: 1px solid var(--theme-border-primary);
  }

  .md-content table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
    margin: 1rem 0;
    border-radius: 0.75rem;
    overflow: hidden;
    background-color: var(--theme-surface-primary);
    border: 1px solid var(--theme-border-primary);
    box-shadow: 0 2px 8px var(--theme-shadow-color);
  }

  .md-content th,
  .md-content td {
    padding: 0.625rem 0.875rem;
    border-bottom: 1px solid var(--theme-border-primary);
  }

  .md-content th {
    background-color: color-mix(in srgb, var(--theme-accent-primary-subtle) 60%, var(--theme-surface-secondary));
    font-weight: 600;
    text-align: left;
    color: var(--theme-text-primary);
  }

  .md-content td {
    color: var(--theme-text-secondary);
  }
}

@layer utilities {
  .card-shadow {
    box-shadow: 0 10px 30px -5px var(--theme-shadow-color);
  }

  .card-shadow-hover {
    box-shadow: 0 20px 40px -5px var(--theme-shadow-color);
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Gradient text utility with dynamic colors (dual-layer gradient) */
  .text-gradient {
    --gradient-from: var(--theme-accent-primary);
    --gradient-to: var(--theme-accent-secondary);
    background:
      linear-gradient(to right bottom, rgb(0 0 0 / 0.2) 0%, rgb(170 170 170 / 0.067)),
      linear-gradient(to right bottom, var(--gradient-from) 40%, var(--gradient-to));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
}

/* Bokeh orb floating animations */
@keyframes bokeh-float-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(30px, -20px) scale(1.05); }
  50% { transform: translate(-10px, 25px) scale(0.95); }
  75% { transform: translate(-25px, -15px) scale(1.02); }
}

@keyframes bokeh-float-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(-35px, 20px) scale(1.08); }
  66% { transform: translate(25px, -30px) scale(0.92); }
}

@keyframes bokeh-float-3 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  20% { transform: translate(20px, 35px) scale(0.96); }
  40% { transform: translate(-30px, 10px) scale(1.04); }
  60% { transform: translate(15px, -25px) scale(1.02); }
  80% { transform: translate(-20px, -10px) scale(0.98); }
}

@keyframes bokeh-float-4 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  50% { transform: translate(-40px, -35px) scale(1.1); }
}

@keyframes bokeh-pulse {
  0%, 100% { opacity: var(--bokeh-opacity, 0.5); }
  50% { opacity: calc(var(--bokeh-opacity, 0.5) * 1.3); }
}

.bokeh-orb {
  will-change: transform, opacity;
}

.bokeh-orb-1 {
  --bokeh-opacity: 0.7;
  animation: bokeh-float-1 25s ease-in-out infinite, bokeh-pulse 8s ease-in-out infinite;
}

.bokeh-orb-2 {
  --bokeh-opacity: 0.6;
  animation: bokeh-float-2 30s ease-in-out infinite, bokeh-pulse 10s ease-in-out infinite;
  animation-delay: -5s;
}

.bokeh-orb-3 {
  --bokeh-opacity: 0.5;
  animation: bokeh-float-3 35s ease-in-out infinite, bokeh-pulse 12s ease-in-out infinite;
  animation-delay: -10s;
}

.bokeh-orb-4 {
  --bokeh-opacity: 0.65;
  animation: bokeh-float-4 28s ease-in-out infinite, bokeh-pulse 9s ease-in-out infinite;
  animation-delay: -3s;
}

.bokeh-orb-5 {
  --bokeh-opacity: 0.4;
  animation: bokeh-float-1 32s ease-in-out infinite reverse, bokeh-pulse 11s ease-in-out infinite;
  animation-delay: -8s;
}

.bokeh-orb-6 {
  --bokeh-opacity: 0.55;
  animation: bokeh-float-2 26s ease-in-out infinite, bokeh-pulse 7s ease-in-out infinite;
  animation-delay: -12s;
}

.bokeh-orb-7 {
  --bokeh-opacity: 0.45;
  animation: bokeh-float-3 22s ease-in-out infinite reverse, bokeh-pulse 13s ease-in-out infinite;
  animation-delay: -6s;
}

.bokeh-orb-8 {
  --bokeh-opacity: 0.5;
  animation: bokeh-float-4 38s ease-in-out infinite, bokeh-pulse 15s ease-in-out infinite;
  animation-delay: -15s;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .bokeh-orb {
    animation: none;
  }
}

/* Cursor highlight animation - optimized for performance */
@keyframes horizontal-shine {
  0% {
    transform: translateX(-200%);
    opacity: 0;
  }
  10% {
    opacity: 0;
  }
  30% {
    opacity: 0.8;
  }
  50% {
    opacity: 1;
  }
  70% {
    opacity: 0.6;
  }
  90%, 100% {
    transform: translateX(200%);
    opacity: 0;
  }
}

.animate-metallic-shine {
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0) 5%,
    rgba(255, 255, 255, 0.4) 25%,
    rgba(255, 255, 255, 0.9) 50%,
    rgba(255, 255, 255, 0.4) 75%,
    rgba(255, 255, 255, 0) 95%,
    transparent 100%
  );
  filter: blur(1px);
  animation: horizontal-shine 4s ease-in-out 1s infinite;
  will-change: transform;
}

/* ========== 全局页面加载动效 (PageLoading) ========== */
@keyframes page-loading-bar {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(200%);
  }
  100% {
    transform: translateX(-100%);
  }
}

@keyframes page-loading-spinner {
  to {
    transform: rotate(360deg);
  }
}

.page-loading-bar {
  animation: page-loading-bar 1.2s ease-in-out infinite;
}

.page-loading-spinner-ring {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  border: 3px solid transparent;
  border-top-color: var(--theme-accent-primary);
  border-right-color: var(--theme-accent-secondary);
  animation: page-loading-spinner 1.1s linear infinite;
}

.page-loading-spinner-ring--delay {
  inset: 6px;
  border-top-color: var(--theme-accent-tertiary);
  border-right-color: var(--theme-accent-primary);
  animation-duration: 0.9s;
  animation-direction: reverse;
}

/* loading 文案：轻微呼吸 + 字间距动效 */
@keyframes page-loading-text {
  0%,
  100% {
    opacity: 0.5;
    letter-spacing: 0.15em;
  }
  50% {
    opacity: 1;
    letter-spacing: 0.25em;
  }
}

.page-loading-text {
  animation: page-loading-text 1.4s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .page-loading-bar,
  .page-loading-spinner-ring,
  .page-loading-spinner-ring--delay,
  .page-loading-text {
    animation: none;
  }
  .page-loading-text {
    opacity: 1;
    letter-spacing: 0.2em;
  }
  .page-loading-spinner-ring {
    border-top-color: var(--theme-accent-primary);
    border-right-color: var(--theme-accent-primary);
    opacity: 0.6;
  }
  .page-loading-spinner-ring--delay {
    opacity: 0.3;
  }
}
