@import 'tailwindcss';
@import './view-transitions.css';
@import './themes.css';

@theme {
  /* Fonts */
  --font-sans: var(--font-sans), ui-sans-serif, system-ui, sans-serif;
  --font-display: var(--font-display), ui-sans-serif, system-ui, sans-serif;
  /* Background */
  --color-bg-base: var(--theme-bg-base);

  /* Accent colors */
  --color-accent-primary: var(--theme-accent-primary);
  --color-accent-secondary: var(--theme-accent-secondary);
  --color-accent-tertiary: var(--theme-accent-tertiary);
  --color-accent-primary-light: var(--theme-accent-primary-light);
  --color-accent-secondary-light: var(--theme-accent-secondary-light);
  --color-accent-tertiary-light: var(--theme-accent-tertiary-light);
  --color-accent-primary-dark: var(--theme-accent-primary-dark);
  --color-accent-primary-muted: var(--theme-accent-primary-muted);
  --color-accent-primary-subtle: var(--theme-accent-primary-subtle);

  /* Surface colors */
  --color-surface-primary: var(--theme-surface-primary);
  --color-surface-secondary: var(--theme-surface-secondary);
  --color-surface-tertiary: var(--theme-surface-tertiary);
  --color-surface-hover: var(--theme-surface-hover);
  --color-surface-glass: var(--theme-surface-glass);
  --color-surface-selected: var(--theme-surface-selected);

  /* Content (text) colors */
  --color-content-primary: var(--theme-text-primary);
  --color-content-secondary: var(--theme-text-secondary);
  --color-content-tertiary: var(--theme-text-tertiary);
  --color-content-muted: var(--theme-text-muted);
  --color-content-dim: var(--theme-text-dim);
  --color-content-disabled: var(--theme-text-disabled);
  --color-content-inverse: var(--theme-text-inverse);

  /* Border (line) colors */
  --color-line-primary: var(--theme-border-primary);
  --color-line-secondary: var(--theme-border-secondary);
  --color-line-hover: var(--theme-border-hover);
  --color-line-focus: var(--theme-border-focus);
  --color-line-glass: var(--theme-border-glass);

  /* UI component colors */
  --color-ui-primary: var(--theme-ui-primary);
  --color-ui-primary-hover: var(--theme-ui-primary-hover);
  --color-ui-primary-ring: var(--theme-ui-primary-ring);
  --color-ui-destructive: var(--theme-ui-destructive);
  --color-ui-destructive-hover: var(--theme-ui-destructive-hover);
  --color-ui-destructive-light: var(--theme-ui-destructive-light);
  --color-ui-success: var(--theme-ui-success);
  --color-ui-success-text: var(--theme-ui-success-text);
  --color-ui-switch-off: var(--theme-ui-switch-off);

  /* Legacy alias for alignment guides */
  --color-primary: var(--theme-accent-primary);
  --color-primary-light: var(--theme-accent-primary-light);
  --color-primary-dark: var(--theme-accent-primary-dark);
}

@layer base {
  body {
    background-color: var(--theme-bg-base);
    @apply min-h-screen;
    transition: background-color 0.3s ease, color 0.3s ease;
    position: relative;
  }

  .frosted-overlay {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    backdrop-filter: blur(var(--frosted-blur, 60px)) saturate(var(--frosted-saturate, 1.8));
    -webkit-backdrop-filter: blur(var(--frosted-blur, 60px)) saturate(var(--frosted-saturate, 1.8));
    background: var(--frosted-tint, rgba(255, 255, 255, 0.05));
    transition: backdrop-filter 0.3s ease, background 0.3s ease;
  }

  body > * {
    position: relative;
    z-index: 1;
  }
}

@layer utilities {
  .card-shadow {
    box-shadow: 0 10px 30px -5px var(--theme-shadow-color);
  }

  .card-shadow-hover {
    box-shadow: 0 20px 40px -5px var(--theme-shadow-color);
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Gradient text utility with dynamic colors (dual-layer gradient) */
  .text-gradient {
    --gradient-from: var(--theme-accent-primary);
    --gradient-to: var(--theme-accent-secondary);
    background:
      linear-gradient(to right bottom, rgb(0 0 0 / 0.2) 0%, rgb(170 170 170 / 0.067)),
      linear-gradient(to right bottom, var(--gradient-from) 40%, var(--gradient-to));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
}

/* Bokeh orb floating animations */
@keyframes bokeh-float-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(30px, -20px) scale(1.05); }
  50% { transform: translate(-10px, 25px) scale(0.95); }
  75% { transform: translate(-25px, -15px) scale(1.02); }
}

@keyframes bokeh-float-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(-35px, 20px) scale(1.08); }
  66% { transform: translate(25px, -30px) scale(0.92); }
}

@keyframes bokeh-float-3 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  20% { transform: translate(20px, 35px) scale(0.96); }
  40% { transform: translate(-30px, 10px) scale(1.04); }
  60% { transform: translate(15px, -25px) scale(1.02); }
  80% { transform: translate(-20px, -10px) scale(0.98); }
}

@keyframes bokeh-float-4 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  50% { transform: translate(-40px, -35px) scale(1.1); }
}

@keyframes bokeh-pulse {
  0%, 100% { opacity: var(--bokeh-opacity, 0.5); }
  50% { opacity: calc(var(--bokeh-opacity, 0.5) * 1.3); }
}

.bokeh-orb {
  will-change: transform, opacity;
}

.bokeh-orb-1 {
  --bokeh-opacity: 0.7;
  animation: bokeh-float-1 25s ease-in-out infinite, bokeh-pulse 8s ease-in-out infinite;
}

.bokeh-orb-2 {
  --bokeh-opacity: 0.6;
  animation: bokeh-float-2 30s ease-in-out infinite, bokeh-pulse 10s ease-in-out infinite;
  animation-delay: -5s;
}

.bokeh-orb-3 {
  --bokeh-opacity: 0.5;
  animation: bokeh-float-3 35s ease-in-out infinite, bokeh-pulse 12s ease-in-out infinite;
  animation-delay: -10s;
}

.bokeh-orb-4 {
  --bokeh-opacity: 0.65;
  animation: bokeh-float-4 28s ease-in-out infinite, bokeh-pulse 9s ease-in-out infinite;
  animation-delay: -3s;
}

.bokeh-orb-5 {
  --bokeh-opacity: 0.4;
  animation: bokeh-float-1 32s ease-in-out infinite reverse, bokeh-pulse 11s ease-in-out infinite;
  animation-delay: -8s;
}

.bokeh-orb-6 {
  --bokeh-opacity: 0.55;
  animation: bokeh-float-2 26s ease-in-out infinite, bokeh-pulse 7s ease-in-out infinite;
  animation-delay: -12s;
}

.bokeh-orb-7 {
  --bokeh-opacity: 0.45;
  animation: bokeh-float-3 22s ease-in-out infinite reverse, bokeh-pulse 13s ease-in-out infinite;
  animation-delay: -6s;
}

.bokeh-orb-8 {
  --bokeh-opacity: 0.5;
  animation: bokeh-float-4 38s ease-in-out infinite, bokeh-pulse 15s ease-in-out infinite;
  animation-delay: -15s;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .bokeh-orb {
    animation: none;
  }
}
